<!DOCTYPE html>
<title>[e]mergences</title>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

<head>
    <div class="container">
        <div class="col1">
            <template class="oscillator-template">
                <div class="oscillator" id="oscillator">

                    <div class="frequency">
                        <div>Frequency: <text></text>Hz</div>
                        <input type="range" id="freq" min="0.2" max="50" step="0.01" class="slider" />
                    </div>
                    <div class="damping">
                        <div>Damping: <text></text></div>
                        <input type="range" id="damp" min="-0.002" max="0.02" step="0.001" value="0.001"
                            class="slider" />
                    </div>
                    <div class="amplitude">
                        <div>Amplitude: <text></text>%</div>
                        <input type="range" id="amp" value="100" class="slider" />
                    </div>
                    <div class="phase">
                        <div>Phase Rate: <text></text>%</div>
                        <input type="range" id="phase" value="0" class="slider" />
                    </div>


                </div>
            </template>
        </div>
        <div class="oscillator-container">
            <details id="myDetails" close ontoggle="toggleDetails(this)">
                <summary class="oscillator summary">Show Oscillator</summary>
                <div class="left"></div>
            </details>

            <div class="scene-container"></div>
        </div>
        <link href="https://fonts.googleapis.com/css?family=Press+Start+2P&display=swap" rel="stylesheet">
        <div class="app">
            <button class="heart" id="likebut"></button>
            <div class="TimerText"> <text></text></div>
            <time id="countdown"></time>
        </div>

        <div id="counter"></div>
        <script>
            document.querySelector(".left").style.height = innerHeight * 0.9 + "px";
            ///////////////////////////////////////////////////////////////////////////////
            // global variables
            /////////////////////////////////////////////////////////////////////////////
            
            
            let count = 40000;
            let t = 0;

            ///////////////////////////////////////////////////////////////////////////////
            // create the oscillators using Oscillator() as a constructor
            ///////////////////////////////////////////////////////////////////////////////

            const template = document
                .querySelector(".oscillator-template")
                .content.querySelector(".oscillator");

            const oscillators = [];
            oscillators.push(Oscillator());

            ///////////////////////////////////////////////////////////////////////////////
            // for creating the oscillators and storing their values in a central location
            ///////////////////////////////////////////////////////////////////////////////

            function Oscillator() {
                const newOscillator = document.importNode(template, true);
                const self = {};
                // frequency
                const fInput = newOscillator.querySelector(".frequency input");
                const fText = newOscillator.querySelector(".frequency text");
                self.f = fInput.value = 10;

                fText.innerHTML = self.f * 100;

                fInput.oninput = function() {
                    self.f = +this.value;

                    fText.innerHTML = Math.ceil(self.f * 100);
                    t = 0;

                };

                // damping
                const dInput = newOscillator.querySelector(".damping input");
                const dText = newOscillator.querySelector(".damping text");
                self.d = dText.innerHTML = +dInput.value;

                dInput.oninput = function() {
                    self.d = dText.innerHTML = +this.value;
                    t = 0;

                };

                // amplitude
                const aInput = newOscillator.querySelector(".amplitude input");
                const aText = newOscillator.querySelector(".amplitude text");
                self.a = aText.innerHTML = +aInput.value;


                aInput.oninput = function() {
                    self.a = aText.innerHTML = +this.value;
                    t = 0;

                };

                // phase
                const pInput = newOscillator.querySelector(".phase input");
                const pText = newOscillator.querySelector(".phase text");
                self.p = +pInput.value;
                pText.innerHTML = self.p;

                pInput.oninput = function() {
                    self.p = +this.value;
                    pText.innerHTML = self.p;

                };
                document.querySelector(".left").appendChild(newOscillator);
                return self;
            }


            function toggleDetails(self) {
                self.children[0].innerHTML = self.open ?
                    "Hide Oscillator" :
                    "Show Oscillator";
            }
        </script>

</head>
